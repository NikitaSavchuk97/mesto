(()=>{"use strict";var e=document.querySelector(".profile-info__edit-button"),t=document.querySelector(".add-button"),n=document.querySelector(".popup_type_info").querySelector(".popup__form"),o=n.querySelector(".popup__name"),r=n.querySelector(".popup__about"),i=document.querySelector(".popup_type_photo").querySelector(".popup__form"),l=(document.querySelector(".popup_type_illustration"),{inputSelector:"popup__input",submitButtonSelector:"popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_type_active"}),u={popupCloseBtnCssClass:"popup__close",popupActiveCssClass:"popup_active"},a={popupFormSelector:".popup__form",popupFormInputSelector:".popup__input",popupFormSubmitBtnSelector:".popup__save-button"};function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=s((function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_showInputError",(function(e,t){var n=o._form.querySelector(".".concat(e.id,"-error"));e.classList.add(o._inputErrorClass),n.classList.add(o._errorClass),n.textContent=t})),p(this,"_hideInputError",(function(e){var t=o._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(o._inputErrorClass),t.textContent="",t.classList.remove(o._errorClass)})),p(this,"_isValid",(function(e){if(e.validity.valid)o._hideInputError(e);else{var t=e.validationMessage;o._showInputError(e,t)}})),p(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),p(this,"_disableSubmitBtn",(function(){o._formSaveButton.classList.add(o._inactiveButtonClass),o._formSaveButton.disabled=!0})),p(this,"_enableSubmitBtn",(function(){o._formSaveButton.classList.remove(o._inactiveButtonClass),o._formSaveButton.disabled=!1})),p(this,"_toggleButtonState",(function(){o._hasInvalidInput(o._inputElementList)?o._disableSubmitBtn():o._enableSubmitBtn()})),p(this,"disableValidation",(function(){o._disableSubmitBtn(),o._inputElementList.forEach((function(e){o._hideInputError(e)}))})),p(this,"enableValidation",(function(){o._inputElementList.forEach((function(e){e.addEventListener("input",(function(){o._isValid(e),o._toggleButtonState()}))})),o._toggleButtonState()})),this._form=n,this._inputSelector=t.inputSelector,this._inputElementList=Array.from(this._form.querySelectorAll(".".concat(this._inputSelector))),this._submitButtonSelector=t.submitButtonSelector,this._formSaveButton=this._form.querySelector(".".concat(this._submitButtonSelector)),this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}));function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=function(){function e(t,n,o){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_getTemplate",(function(){return r._template.content.querySelector(".element").cloneNode(!0)})),m(this,"createCard",(function(){return r._element=r._getTemplate(),r._elementPhoto=r._element.querySelector(".element__photo"),r._elementTitle=r._element.querySelector(".element__title"),r._elementLikeBtn=r._element.querySelector(".element__like"),r._elementDeleteBtn=r._element.querySelector(".element__delete"),r._elementPhoto.src=r._link,r._elementPhoto.alt=r._name,r._elementTitle.textContent=r._name,r._setEventListeners(),r._element})),m(this,"_handleLikeClick",(function(){r._elementLikeBtn.classList.toggle("element__like_active")})),m(this,"_handleDeleteClick",(function(){r._element.remove(),r._element=null})),m(this,"_setEventListeners",(function(){r._elementLikeBtn.addEventListener("click",(function(){r._handleLikeClick()})),r._elementDeleteBtn.addEventListener("click",(function(){r._handleDeleteClick()})),r._elementPhoto.addEventListener("click",(function(){r._handleImageClick()}))})),this._name=t.name,this._link=t.link,this._template=document.querySelector(n),this._openPopupIllustration=o}var t,n;return t=e,(n=[{key:"_handleImageClick",value:function(){this._openPopupIllustration({name:this._name,link:this._link})}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const b=function(){function e(t,n){var o=t.elementsSelector,r=n.items,i=n.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements=document.querySelector(o),this._items=r,this._renderer=i}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){var n=e._renderer(t);e.addItem(n)}))}},{key:"addItem",value:function(e){this._elements.prepend(e)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const v=function(){function e(t,n){var o=n.popupActiveCssClass,r=n.popupCloseBtnCssClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._popupActiveCssClass=o,this._popupCloseBtnCssClass=r,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains(e._popupActiveCssClass)&&e.close(),t.target.classList.contains(e._popupCloseBtnCssClass)&&e.close()}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popup.classList.add(this._popupActiveCssClass),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(this._popupActiveCssClass),document.removeEventListener("keydown",this._handleEscClose)}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=C(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},g.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function B(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(o);if(r){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function l(e,t,n){var o,r=n.popupIllustrationImageSelector,u=n.popupIllustrationSubtitleSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(o=i.call(this,e,t))._cardImage=o._popup.querySelector(r),o._cardSubtitle=o._popup.querySelector(u),o.open=o.open.bind(E(o)),o}return t=l,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;this._cardImage.src=n,this._cardImage.alt=t,this._cardSubtitle.textContent=t,g(O(l.prototype),"open",this).call(this)}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(v);const x=j;function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=q(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},I.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function M(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(o);if(r){var n=H(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function l(e,t,n,o){var r,u=n.popupFormSelector,a=n.popupFormInputSelector,c=n.popupFormSubmitBtnSelector,s=o.callBack;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=i.call(this,e,t))._popupForm=r._popup.querySelector(u),r._popupFormInputs=Array.from(r._popup.querySelectorAll(a)),r._popupFormSubmitBtn=r._popup.querySelector(c),r._callBack=s,r}return t=l,(n=[{key:"_getInputvalues",value:function(){var e=this;return this._inputValues={},this._popupFormInputs.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._callBack(e._getInputvalues()),e.close()})),I(H(l.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._popupForm.reset(),I(H(l.prototype),"close",this).call(this)}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(v);const V=R;function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const T=function(){function e(t){var n=t.profileNameSelector,o=t.profileJobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(n),this._profileJob=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._profileName.textContent=t,this._profileJob.textContent=n}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var F=new f(l,i),G=new f(l,n),N=new x(".popup_type_illustration",u,{popupIllustrationImageSelector:".popup__image",popupIllustrationSubtitleSelector:".popup__subtitle"}),W=new T({profileNameSelector:".profile-info__name",profileJobSelector:".profile-info__title"}),Y=new b({elementsSelector:".elements"},{items:[{name:"Самое время отдохнуть",link:"https://images.unsplash.com/photo-1592528855735-14e349c28919?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80"},{name:"Я похож на свинку?",link:"https://images.unsplash.com/photo-1508547003855-6502567e0cc3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80"},{name:"Мааааам, я запутался",link:"https://images.unsplash.com/photo-1507449863419-a3aa39ac22d3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80"},{name:"Обеденный перерыв",link:"https://images.unsplash.com/photo-1621005881955-ddf54d05c6cb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1887&q=80"},{name:"Водные процедуры",link:"https://images.unsplash.com/photo-1616406751397-b280e83b80bc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1887&q=80"},{name:"Чего?",link:"https://images.unsplash.com/photo-1598894591353-9e7c935dd774?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80"}].reverse(),renderer:z}),J=new V(".popup_type_info",u,a,{callBack:function(e){W.setUserInfo(e)}}),U=new V(".popup_type_photo",u,a,{callBack:function(e){Y.addItem(z(e))}});function z(e){return new h(e,".template-item",N.open).createCard()}fetch("https://mesto.nomoreparties.co/v1/cohort-45/cards",{headers:{authorization:"fc6aa907-8218-42c7-978a-495994f7f800"}}).then((function(e){return e.json()})).then((function(e){console.log(e)})),fetch("https://nomoreparties.co/v1/cohort-45/users/me ",{headers:{authorization:"fc6aa907-8218-42c7-978a-495994f7f800"}}).then((function(e){return e.json()})).then((function(e){console.log(e)})),e.addEventListener("click",(function(){G.disableValidation(),J.open();var e=W.getUserInfo(),t=e.name,n=e.job;o.value=t,r.value=n})),t.addEventListener("click",(function(){F.disableValidation(),U.open()})),G.enableValidation(),F.enableValidation(),J.setEventListeners(),U.setEventListeners(),N.setEventListeners(),Y.renderItems()})();